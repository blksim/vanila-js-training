- 국제화는 다른 언어 사용자를 위해 여러 언어로 문서를 처리, 전송하는 것

### 16.1 국제적인 콘텐츠를 다루기 위해 필요한 HTTP 자원 (p428)
- 서버는 클라이언트에게 문서의 문자와 언어를 `Content-Type` charset 매개변수와 `Content-Language` 헤더를 통해 알려준다.
- 동시에, 클라이언트는 서버에게 사용자가 어떤 언어를 이해할 수 있고 어떤 알파벳의 코딩 알고리즘이 브라우저에 설치되어 있는지 말해주기 위해
`Accept-Charset`과 `Accept-Language` 헤더를 보낸다.
```
Accept-Language: fr, en:q=0.8
Accept-Charset: iso-8859-1, utf-8
```

### 16.2 문자집합과 HTTP
- Charset 값은 엔터티 본문 비트를 특정 문자 체계의 문자들로 바꾸는 방식이다.
- Charset 태그는  MIME 문자 집합에 표준화돼있고, IANA가 관리한다.
```
Content-Type: text/html; charset=iso-8859-6
```
- 위와 같은 헤더는, 수신자에게 콘텐츠는 html 파일이며, 콘텐츠 비트를 디코딩하려면 iso-8859-6 디코딩 기법을 사용해야 한다는 뜻이다.
- iso-8859-6 인코딩 구조는 8비트 값을 숫자와 구두점 그리고 다른 기호들을 포함한 라틴 문자와 아랍 문자로 매핑한다.
- 먼저 문서를 이루는 비트들은, 각 문자집합에서 식별할 수 있는 문자 코드로 변환된다. 
1) 인코딩 구조(iso-8859-6)을 사용하여 디코딩 -> 2) 코딩된 문자집합을 사용하여 글자를 찾는다 -> 3) 글꼴과 포매팅 소프트웨어를 사용하여 화면이 보여줄 모양을 찾는다.

- 특정 문자 인코딩과 특정 코딩된 문자집합의 결합은 MIME 차셋이라고 부른다.
- 웹 서버에서 Content-Type 헤더에 문자집합을 명시적으로 표시하지 않으면, HTML 콘텐츠에서 문자 집합은 <META HTTP-EQUIV="Content-Type"> 태그에서 찾을 수 있다.
- 문자 인코딩을 추측하지 못했다면, iso-8859-1인 것으로 가정한다.

### 16.3 다중언어 문자 인코딩에 대한 지침
- 차셋(Charset) 값은 데이터 비트를 고유한 문자의 코드로 매핑하는 알고리즘의 이름이지, 문자집합을 의미하는 것이 결코 아니다.
- 이는 문자 인코딩 구조와 코딩된 문자집합의 개념을 합친 것이다. 

**코딩된 문자 집합** (p439)
- 문자와 정수를 대응시킨 것이다. 코딩된 문자집합은 보통 코드 번호로 인덱싱된 배열로 구현되고, 그 배열의 원소들은 문자들이다.
- US-ASCII는 '정보교환을 위한 미국 표준 코드'로 표준화된 가장 유명한 코딩된 문자 집합이다.
- 값을 표현하는데 오직 0-127만 사용하며, 코드 공간 전체를 표현하는 데 오직 7비트만이 필요하다.
- iso-8859는 유럽어를 담기 위한 추가 비트를 사용한 8비트 확대집합이다.
- Latin1로도 알려진 iso-8859-1은 HTML을 위한 기본 문자집합으로, 대부분의 유럽어 텍스트를 표현하기 위해 사용될 수 있다.

**문자 인코딩 구조** (p440)
> 문자 인코딩 구조들은 숫자로 된 문자 코드를 콘텐츠 비트들로 변환하고 다른 쪽에서는 그들을 다시 문자 코드로 환원한다.
문자 인코딩 구조는 고정폭, 가변폭(비모달), 가변폭(모달)의 세 종류로 구분된다.
- 고정폭 : 코딩된 문자를 고정비트로 표현한다.
- 가변폭(비모달) : 문자 코드 번호마다 다른 길이 비트를 사용한다.
- 가변폭(모달) : 복잡한 글자를 표현하는 경우, 문자집합 간 전환을 위해 이스케이프 패턴을 사용한다.

**UTF-8** : UCS Transformation Format의 약자. 비모달 가변폭 인코딩 사용. 
> 첫 바이트의 선두 비트들은 인코딩된 문자 길이를 바이트 단위로 나타내고, 그 이후 바이트들은 각각 6비트의 코드 값을 담는다.

### 16.4 언어 태그와 HTTP
- 언어에 이름을 붙이기 위한 짧고 표준화된 문자열
- `Content-Language` 엔터티 필드 헤더 : 엔터티 본문이 어느 언어 사용자를 대상으로 하고 있는지 표시
- `Accept-Language` 엔터티 필드 헤더 : 이해할 수 있는 언어를 서버에게 전달하기 위해 사용
- 언어 태그의 구성 : 언어 태그는 하이픈으로 분리되는 하나 이상의 서브태그로 구성됨.
```
sng-US-MA <---- 마서스 비니어드 섬의 수화
  sgn : 첫 번째 서브태그(수화)
  US : 두 번째 서브태그(미국)
  MA : 세 번째 서브태그(매사추세츠 지역 변종)
```
- 대소문자는 구분하지 않지만, 관용적으로 언어는 소문자로, 국가는 대문자로 표시한다.
- IANA가 언어 태그 목록을 관리한다. 

### 16.5 국제화된 URI
 - 이스케이핑과 역이스케이핑 : 예약문자나 기타 지원하지 않는 문자들을 URL에 삽입하기 위해 이스케이핑한다. 
 이스케이프는 퍼센트(%) 하나와 16진수 글자 둘로 이루어진 세 글자 문자열을 의미하며, 16진수 두 글자는 US-ASCII 문자의 코드를 나타낸다.
 
### 16.6 국제화된 애플리케이션을 만들 시 기타 고려사항
 - HTTP 헤더는 반드시 US-ASCII 문자집합의 글자로만 이루어져야 한다. 문자 라이브러리를 사용하기 전에 ASCII가 범위를 벗어난 글자를 지원하지 않는지 문서를 주의 깊게 읽을 것.
 - 올바른 GMT 날짜 형식을 준수해야 하고, 파싱할 수 없는 날짜일 경우 서버에서는 그것을 보수적으로 다루어야 함.
 - 국제화 코드를 포함하는 도메인 네임은 대부분의 웹 브라우저에서 퓨니코드(punycode)를 이용해 지원한다. 퓨니코드는 유니코드 문자열을 호스트 명에서 사용 가능한 방식의 문자열로 변환하는 방법이다.
  

